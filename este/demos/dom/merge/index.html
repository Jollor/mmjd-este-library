<!doctype html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
  <title>este.dom.merge</title>
  <link href='../../css/default.css' rel='stylesheet'>
  <style>
    label {
      display: block;
    }
  </style>
  <script src='../../../../../closure-library/closure/goog/base.js'></script>
  <script src='../../../../../../client/deps.js'></script>
  <script>
    goog.require('este.demos.dom.merge.react');
    goog.require('este.demos.dom.merge.templates');
    goog.require('este.dom');
    goog.require('este.dom.merge');
  </script>
</head>
<body>
  <h1>
    este.dom.merge</h1>
  <blockquote>
    <p>Update: This class is <b>deprecated</b>. Facebook <a href="http://facebook.github.io/react/index.html">React</a> is what este.dom.merge was supposed to be. Check este.react <a href="/bower_components/este-library/este/demos/react/index.html">demo</a>.</p>
  </blockquote>
  <p>
    Write something and watch how DOM is updated with remaining state.
  </p>
  <h2>Closure Templates Demo</h2>
  <p>Closure templates are based on string concatenation and innerHTML. It's fastest
    but it overrides current DOM state. este.dom.merge helps, but it's far from ideal.</p>
  <div id='soy-container'></div>
  <h2>React demo</h2>
  <p>The same example rewritten with <a href="/bower_components/este-library/este/demos/react/index.html">este.react</a>. Use it wherever you need to
    preserve DOM state.
  </p>
  <div id='react-container'></div>
  <script>

    createSoyDemo()
    createReactDemo()

    function createSoyDemo() {
      var container = document.getElementById('soy-container');

      container.onkeyup = function() {
        var json = este.dom.serializeForm(container.querySelector('form'));
        updateForm(json);
      };

      var updateForm = function(json) {
        var html = este.demos.dom.merge.templates.form({
          name: json.name,
          description: json.description
        });
        este.dom.merge(container, html);
      };

      updateForm({
        name: '',
        description: 'Some text...'
      });
    };

    function createReactDemo() {
      var container = document.getElementById('react-container');
      var component = este.demos.dom.merge.react({
        name: '',
        description: 'Some text...'
      });
      este.react.render(component, container);
    };

  </script>
</body>